<div class="container-fluid d-flex  pt-4 pb-5 ps-0 flex-wrap bg-dark d-block"
    style="margin:0; height:100vh;overflow-y:auto">
    <i class="bi bi-box-arrow-left"
        style="color:white;font-size:30px;position:absolute;right:25px;top:10px; cursor:pointer"
        (click)="cerrarSesion()"></i>
    <h1 class="mt-3 text-white badge badge-pill badge-danger badge float-right"></h1>
    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()"
        class="card d-inline-block col-md-3 col-sm-3 col-lg-3 col-xl-3  ms-3 mb-3"
        style="min-height: 370px;height: 50%;">
        <div class="card-body">
            <div class="form-group">
                <h4 class="text-center">Agregar Nota</h4>
            </div>
            <div class="form-group">
                <label htmlFor="nombre">Titulo</label>
                <input class="form-control" autoComplete="off" id="nombre" type="text" formControlName="title" />
            </div>
            <div class="form-group">
                <label htmlFor="nota">Descripcion</label>
                <input class="form-control" autoComplete="off" id="nota" type="text" formControlName="description" />
            </div>
            <div class="form-group ">
                <label class="d-flex align-items-center">
                    <input type="checkbox" #completedInput disabled [checked]=false style="margin-top:2px" />Completado
                </label>
            </div>
            <div class="form-group mt-4 d-flex justify-content-between">
                <button type="submit" [disabled]="taskForm.invalid"
                    class="btn btn-success btn-lg btn-block sinborde">Guardar</button>

                <button *ngIf="(tasks$ | async)?.length" (click)="eliminarTodo()"
                    class="btn btn-danger btn-lg btn-block sinborde">Eliminar
                    Todo</button>
            </div>
        </div>
    </form>
    <form *ngFor="let task of (tasks$ | async)" style="min-height: 370px;height: 50%; position:relative"
        class="card col-md-3 d-inline-block  tarjeta ms-3 mb-3">
        <div class="d-flex justify-content-end" style="position:absolute;right:5px">
            <i class="bi bi-x" style="font-size:20px;color:red" (click)="eliminarTarea(task.id)"></i>
        </div>
        <div class="card-body">

            <div class="form-group">
                <h5 class="text-center">Nota N.{{task.id}}</h5>
            </div>
            <div class="form-group">
                <label>Titulo</label>
                <input #tituloInput class="form-control" [value]="task.title" type="text" />
            </div>
            <div class="form-group">
                <label>Descripcion</label>
                <input #descInput class="form-control" [value]="task.description" type="text" />
            </div>
            <div class="form-group mt-2">
                <label class="d-flex align-items-center" style="cursor:pointer">
                    <input type="checkbox" #completedInput [checked]="task.completed"
                        style="margin-top:2px" />Completado
                </label>
            </div>
            <div class="form-group mt-2">
                <p class="text-mutted" style="font-size:12px"><span style="font-weight:bold;">Fecha de creacion:
                    </span> {{task.created_at | date:'dd/MM/yyyy hh:mm a' }}</p>
                <p class="text-mutted mt-0" style="font-size:12px">
                    <span style="font-weight:bold;">Fecha de ultima
                        edicion:
                    </span> {{task.updated_at |
                    date:'dd/MM/yyyy hh:mm a' }}
                </p>
            </div>
            <div class="form-group mt-4 d-flex justify-content-center">
                <button type="submit" class="btn btn-success btn-lg btn-block sinborde"
                    (click)="editar(task.id, tituloInput.value, descInput.value,completedInput.checked)">Editar</button>
            </div>
        </div>
    </form>
</div>